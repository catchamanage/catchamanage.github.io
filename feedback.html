<!DOCTYPE html>
<html class="wrapp-layout">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="HandheldFriendly" content="true">
	<title>Listen QR</title>
	<link rel="icon" href="public/images/favicon.ico">
	<link rel="stylesheet" type="text/css" href="public/semantic/semantic.min.css">
	<link rel="stylesheet" href="public/css/listen.css">
<!-- 	<script
	  src="https://code.jquery.com/jquery-3.1.1.min.js"
	  integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
	  crossorigin="anonymous"></script> -->
	  <script src="public/js/jquery-1.12.4.min.js"></script>
	<script src="public/semantic/semantic.min.js"></script>

</head>
<body>

<div class="screen screen-sayhello">
	<img src="public/uploads/jaxtina.png" class="logo">
	
	<div class="core">
		<h1 class="sayhello">Hãy tham gia đánh giá để giúp Jaxtina cải thiện chất lượng dịch vụ!</h1>

		<button class="big ui yellow button go-react">
		  Bắt đầu
		</button>
	</div>

	<p class='copyright'>Sức mạnh đến từ <a href="http://catcha.vn" target="_blank" class='brand'>CATCHA</a></p>
</div>

<div class="screen screen-react" hidden>
	<div class="ui grid centered">
	  <div class="sixteen wide mobile eight wide tablet eight wide computer column">
		
		<div class="step step-one">
			<div class="item active"></div>
			<div class="item"></div>
			<div class="item"></div>
		</div>

	    <p class="question-one">Mức độ hài lòng về dịch vụ của chúng tôi?</p>

		<div class="emoji ui equal width center aligned grid">			
		  <div class="column item" data-react="3">
		    <img src="public/images/emoji-unhappy.gif" alt="">
		    <p class="tip">Không hài lòng</p>
		  </div>
		  <div class="column item" data-react="2">
		    <img src="public/images/emoji-neutral.gif" alt="">
		    <p class="tip">Bình thường</p>
		  </div>
		  <div class="column item" data-react="1">
		    <img src="public/images/emoji-statisfied.gif" alt="">
		    <p class="tip">Rất hài lòng</p>
		  </div>
		</div>
		
		<div class="guide">
			<i class="help circle icon"></i>
		</div>

	  </div>
	</div>

	<div class="foot-guide" hidden>
		<p>Đánh giá dịch vụ bằng cách <b>chạm</b> biểu tượng cảm xúc tương ứng với mức độ hài lòng.</p>
		<button class="ui button large red go-hidden">
		  Đóng
		</button>
	</div>

</div>

<div class="screen screen-thanks" hidden>
	<div class="ui grid centered">
		<div class="wrap-thanks">
			<img src="public/images/icon/checked_white.png" alt="" class="img-checked" hidden>
			<h1 class="say-thanks">Cảm ơn bạn đã phản hồi.</h1>
			<p class="say-futuer">Chúng tôi luôn trân trọng những đóng góp của bạn và mong nhận được càng nhiều phản hồi hơn nữa trong tương lai.</p>
		</div>
	</div>
</div>

<div class="screen screen-feedback" hidden>
	<div class="ui grid centered">
	  <div class="sixteen wide mobile eight wide tablet eight wide computer column">

		<div class="step step-two">
			<div class="item active comeback"></div>
			<div class="item active"></div>
			<div class="item unactive"></div>
		</div>

	    <!-- <p class="text-center tip">Chạm vào biểu tượng cảm xúc để quay lại</p> -->

		<div class="ui grid centered ">
		  <div class="column  text-center reponse-emotion">
		    <img src="public/images/emoji-unhappy.gif">
		    <p class="reponse-emotion">We are sorry. What we did wrong?</p>
		  </div>
		</div>


		<div class="ui form large body-box">

			<input type="hidden" name="brand" value="zalo_quan-1975">
			<input type="hidden" name="location" value="">

			<div class="ui fluid multiple normal selection dropdown">
				<input type="hidden" name="subject">
				<i class="dropdown icon"></i>
				<div class="default text">Chọn lý do</div>
				<div class="menu topic">
				  <div class="item" data-value="1"><img src="public/uploads/chef.png"> Nhân viên</div>
				  <div class="item" data-value="2"><img src="public/uploads/burger-flat.png"> Thực đơn</div>
				  <div class="item" data-value="3"><img src="public/uploads/salt.png"> Khẩu vị</div>
				  <div class="item" data-value="4"><img src="public/uploads/grocery.png"> Không gian</div>
				  <div class="item" data-value="5"><img class="ui avatar image" src="public/images/icon/etc.png"> Khác</div>
				</div>
			 </div>

			<div class="wrap-feedback opinion" hidden>
				
				<p class="tip-to-opinion"></p>
			
					<div class="field">
					<textarea rows="3" name="opinion" placeholder="Góp ý chi tiết"></textarea>
					</div>

					<p class="help-block">Để lại thông tin để được hỗ trợ ngay khi phản hồi được tiếp nhận:</p>

					<div class="field">
					<input name="name" type="text" placeholder="Họ tên">
					</div>

					<div class="field">
					<input name="phone" type="number" placeholder="Điện thoại" pattern="[0-9]*" inputmode="numeric">
					</div>

					<div class="ui error message"></div>

					<div class="fluid ui animated button large blue btn-final submit" tabindex="0">
					  <div class="visible content">Gửi</div>
					  <div class="hidden content">
					    <i class="send icon"></i>
					  </div>
					</div>
			</div>
		</div>
	  </div>
	</div>
</div>



<script>

	//Effect
	$('.ui.checkbox').checkbox();

	$('.ui.normal.dropdown')
	  .dropdown({
	    maxSelections: 5
	  })
	;


	//sayhello
	$('.go-react').click(function(){
		$('.screen-sayhello').transition('fly right', '500ms', function(){
			$('.screen-react').fadeIn(10);
		});
	});

	//react
	$('.emoji .column').click(function(){
		$('.screen-react').fadeOut();
		$(this).transition({
				animation  : 'fly down',
				duration   : '500ms',
				onComplete : function() {
					$('.screen-feedback').transition('slide down', '350ms');
					$(this).addClass('emoji-fly');
				}
			});
	});

	$('.comeback').click(function(){
		$('.screen-feedback').transition('fly down', '19ms');
		$('.screen-react').fadeIn('1000ms');
		$('.emoji-fly').transition('fly down', '650ms');

		$('.emoji').find('.emoji-fly').removeClass('emoji-fly');

		

	});

	$('.guide, .go-hidden').click(function(){
		$('.foot-guide').transition('slide up', '200ms');
	});

	$('.topic .item').click(function(){
		$('.opinion').transition('slide up', '600ms');
		$('.wrap-feedback').removeClass('opinion');
		$('.unactive').addClass('active');


	});



	//Handle
	var react = 0;
	$(".emoji .item").click(function(){

		//Change text
		react = $(this).data("react");
		var string = "";
		var emotion = "";
		switch(react) {
		    case 1:
		        string = "Tuyệt vời! Bạn hài lòng nhất về điều gì?";
		        emotion = 'statisfied';
		        tip = "Hãy góp ý để chúng tôi hoàn thiện dịch vụ tốt hơn nữa.";
		        break;
		    case 2:
		        string = "Bạn hài lòng nhất về điều gì?";
		        emotion = 'neutral';
		        tip = "Chúng tôi cần làm gì để cải thiện dịch vụ tốt hơn?";
		        break;
		    case 3:
		        string = "Xin lỗi quý khách! Bạn không hài lòng về điều gì?";
		        emotion = 'unhappy';
		        tip = "Chúng tôi cần làm gì để khắc phục sai sót này?";
		        break;
		    default:
		        string = "Tuyệt vời! Điều gì khiến bạn rất hài lòng?";
			    emotion = 'statisfied';
		        tip = "Hãy góp ý cho chúng tôi, làm sao để có thể làm tốt hơn nữa.";
		}

		var html = '<img src="public/images/emoji-'+emotion+'.gif" style="height: 85px">'
		    		+'<p class="reponse-emotion">'+string+'</p>';
		$('.reponse-emotion').html(html);
		$('.tip-to-opinion').text(tip);

	});

	//validate form
	$('.ui.form')
	  .form({
	    on: 'blur',
	    fields: {
	      opinion: {
	        identifier  : 'opinion',
	        rules: [
	          {
	            type   : 'empty',
	            prompt : 'Hãy góp ý giúp chúng tôi hoàn thiện dịch vụ của mình.'
	          },
	          {
	            type   : 'maxLength[500]',
	            prompt : 'Góp ý không dài quá 500 ký tự.'
	          },
            	{
	            type   : 'doesntContain[<]',
	            prompt : 'Góp ý không chứa ký tự đặc biệt.'
	          },
            	{
	            type   : 'doesntContain[>]',
	            prompt : 'Góp ý không chứa ký tự đặc biệt.'
	          },
            	{
	            type   : 'doesntContain[\']',
	            prompt : 'Góp ý không chứa ký tự đặc biệt.'
	          },
            	{
	            type   : 'doesntContain[\"]',
	            prompt : 'Góp ý không chứa ký tự đặc biệt.'
	          },
            	{
	            type   : 'doesntContain[@]',
	            prompt : 'Góp ý không chứa ký tự đặc biệt.'
	          },
            	{
	            type   : 'doesntContain[{]',
	            prompt : 'Góp ý không chứa ký tự đặc biệt.'
	          },
            	{
	            type   : 'doesntContain[}]',
	            prompt : 'Góp ý không chứa ký tự đặc biệt.'
	          }
	        ]
	      },
	      name: {
	        identifier  : 'name',
	        rules: [
	          {
	            type   : 'maxLength[50]',
	            prompt : 'Xin lỗi hãy dùng tên ngắn hơn.'
	          },
            	{
	            type   : 'doesntContain[<]',
	            prompt : 'Góp ý không chứa ký tự đặc biệt.'
	          },
            	{
	            type   : 'doesntContain[>]',
	            prompt : 'Góp ý không chứa ký tự đặc biệt.'
	          },
            	{
	            type   : 'doesntContain[\']',
	            prompt : 'Góp ý không chứa ký tự đặc biệt.'
	          },
            	{
	            type   : 'doesntContain[\"]',
	            prompt : 'Góp ý không chứa ký tự đặc biệt.'
	          },
            	{
	            type   : 'doesntContain[@]',
	            prompt : 'Góp ý không chứa ký tự đặc biệt.'
	          },
            	{
	            type   : 'doesntContain[{]',
	            prompt : 'Góp ý không chứa ký tự đặc biệt.'
	          },
            	{
	            type   : 'doesntContain[}]',
	            prompt : 'Góp ý không chứa ký tự đặc biệt.'
	          }
	        ]
	      },
	      phone: {
	        identifier  : 'phone',
	        rules: [
	          {
	            type   : 'regExp[/^[+0-9_-]{0,11}$/]',
	            prompt : 'Chỉ điền số điện thoại.'
	          }
	        ]
	      },
	      brand: {
	        identifier  : 'brand',
	        rules: [
	          {
	            type   : 'regExp[/^[a-zA-Z0-9_-]{3,50}$/]',
	            prompt : 'Không tìm thấy thương hiệu đề xuất.'
	          }
	        ]
	      },
	      location: {
	        identifier  : 'location',
	        rules: [
	          {
	            type   : 'regExp[/^[a-zA-Z0-9_-]{0,255}$/]',
	            prompt : 'Không tìm thấy vị trí đề xuất.'
	          }
	        ]
	      },
	      subject: {
	        identifier  : 'subject',
	        rules: [
	          {
	            type   : 'maxCount[5]',
	            prompt : 'Tối đa được chọn 5 chủ đề.'
	          },
	          {
	            type   : 'regExp[/^[\,0-9]{0,11}$/]',
	            prompt : 'Không tìm thấy chủ đề đề xuất.'
	          }
	        ]
	      }
	    },
	    onSuccess : function() {
            $('.screen-feedback').transition('fade', '10ms');
            $('.screen-thanks').transition('fade', '650ms');
            $('.img-checked').transition('browse', '1800ms');

			var brand = $("input[name=brand]").val();
			var location = $("input[name=location]").val();
			var subject = $("input[name=subject]").val();
			var opinion = $("textarea[name=opinion]").val();
			var name = $("input[name=name]").val();
			var phone = $("input[name=phone]").val();

			var data = {
				react: react,
				brand: brand,
				location: location,
				subject: subject,
				opinion: opinion,
				name: name,
				phone: phone
			}
			console.log(data);

        }
	  })
	;




</script>

</body>
</html>